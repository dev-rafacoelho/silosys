import Svg, { Path, G, ClipPath, Rect, Defs } from "react-native-svg";

/**
 * Silo SVG component that shows a visual fill level.
 * @param {number} estado - fill level 0-5 (0 = empty, 5 = full)
 * @param {number} [width] - desired width
 * @param {number} [height] - desired height
 */

// Green fill paths for each level (extracted from website SVGs)
const FILL_PATHS = {
  0: null, // empty
  1: "M25 656V575.571C25 575.571 130.575 601.809 200.259 602.267C273.093 602.747 311.014 578.998 383.722 575.571C468.324 571.582 600 589.809 600 589.809V656H25Z",
  2: "M25 656V464.36C25 464.36 130.575 526.877 200.259 527.97C273.093 529.112 311.014 472.527 383.722 464.36C468.324 454.856 600 498.285 600 498.285V656H25Z",
  3: "M25 656V392.867C25 392.867 121.316 449.5 191 451C263.833 452.568 311.014 404.081 383.722 392.867C468.324 379.818 600 439.449 600 439.449V656H25Z",
  4: "M25 656V248.888C25 248.888 121.316 303.179 191 305.5C263.833 307.926 311.014 266.239 383.722 248.888C468.324 228.699 600 305.5 600 305.5V656H25Z",
  5: "M25 656V116.482C25 116.482 121.316 154.924 191 158C263.833 161.215 311.014 139.475 383.722 116.482C468.324 89.7265 600 158 600 158V656H25Z",
};

export default function SiloSvg({ estado = 0, width = 280, height = 307 }) {
  const fillPath = FILL_PATHS[estado] || null;

  return (
    <Svg
      width={width}
      height={height}
      viewBox="0 0 625 685"
      fill="none"
    >
      <Defs>
        <ClipPath id="siloClip">
          <Rect width="624.1" height="684.67" fill="white" />
        </ClipPath>
      </Defs>
      <G clipPath="url(#siloClip)">
        {/* Body */}
        <Path d="M599.51 134.02H24.6V655.59H599.51V134.02Z" fill="#E8E8E8" />
        {/* Horizontal bands */}
        <Path d="M603.22 155.11H20.88V181H603.22V155.11Z" fill="#DDDDDD" />
        <Path d="M599.51 181H24.6V191.9H599.51V181Z" fill="#C6C6C6" />
        <Path d="M603.22 245.56H20.88V271.45H603.22V245.56Z" fill="#DDDDDD" />
        <Path d="M599.51 271.45H24.6V282.35H599.51V271.45Z" fill="#C6C6C6" />
        <Path d="M603.22 336.01H20.88V361.9H603.22V336.01Z" fill="#DDDDDD" />
        <Path d="M599.51 361.9H24.6V372.8H599.51V361.9Z" fill="#C6C6C6" />
        <Path d="M603.22 426.45H20.88V452.34H603.22V426.45Z" fill="#DDDDDD" />
        <Path d="M599.51 452.35H24.6V463.25H599.51V452.35Z" fill="#C6C6C6" />
        <Path d="M603.22 516.9H20.88V542.79H603.22V516.9Z" fill="#DDDDDD" />
        <Path d="M599.51 542.8H24.6V553.7H599.51V542.8Z" fill="#C6C6C6" />
        <Path d="M603.22 607.35H20.88V633.24H603.22V607.35Z" fill="#DDDDDD" />
        <Path d="M599.51 633.24H24.6V644.14H599.51V633.24Z" fill="#C6C6C6" />
        {/* Top band */}
        <Path d="M599.51 111.99H24.6V134.03H599.51V111.99Z" fill="#C6C6C6" />
        {/* Base */}
        <Path
          d="M609.62 684.67H14.48C6.67 684.67 0.35 678.16 0.35 670.13C0.35 662.1 6.68 655.59 14.48 655.59H609.62C617.43 655.59 623.75 662.1 623.75 670.13C623.75 678.16 617.42 684.67 609.62 684.67Z"
          fill="#E8E8E8"
        />
        {/* Roof */}
        <Path d="M312.05 5.06L624.1 111.99H312.05H0L312.05 5.06Z" fill="#E8E8E8" />
        {/* Roof detail */}
        <Path
          d="M436.89 60.17L499.88 86.31L563.05 111.99L500.72 84.21L438.21 56.88L375.58 29.85L313.67 3.25L312.05 0L310.43 3.25L248.52 29.85L185.89 56.89C144.19 75.05 102.53 93.29 61.05 111.99C103.24 95.05 145.24 77.64 187.21 60.16L250.08 33.73L292.33 15.89L271.81 30.05C258.83 39.05 245.76 47.91 232.87 57.06C206.99 75.19 181.16 93.38 155.6 112C182.19 94.97 208.5 77.52 234.78 60.01C247.97 51.33 260.98 42.38 274.07 33.55L306.16 11.82L296.68 30.83C292.25 39.79 287.69 48.68 283.41 57.71C274.69 75.7 266.04 93.73 257.82 111.99C267.68 94.61 277.1 77 286.46 59.34C291.22 50.56 295.69 41.62 300.3 32.76L312.05 9.98L323.8 32.76C328.41 41.62 332.88 50.56 337.64 59.34L351.75 85.77C356.6 94.5 361.31 103.31 366.29 111.98C362.22 102.83 357.9 93.81 353.71 84.72L340.71 57.69C336.43 48.65 331.86 39.77 327.43 30.81L317.95 11.81L350.04 33.54C363.14 42.36 376.14 51.32 389.33 60L428.79 86.19C442.03 94.78 455.19 103.5 468.51 111.98C455.75 102.63 442.84 93.53 430.01 84.3L391.24 57.03C378.35 47.89 365.28 39.03 352.3 30.03L331.8 15.89L374.03 33.73L436.89 60.17Z"
          fill="#C6C6C6"
        />
        {/* Green fill */}
        {fillPath && (
          <Path d={fillPath} fill="#43AE00" fillOpacity={0.4} />
        )}
      </G>
    </Svg>
  );
}
